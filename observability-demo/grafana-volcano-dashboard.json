{
  "annotations": {
    "list": []
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "title": "EXECUTIVE OVERVIEW",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
      "id": 100,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "blue", "value": null},
              {"color": "green", "value": 1}
            ]
          },
          "unit": "rpm"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 0, "y": 1},
      "id": 1,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_executions_total)",
        "refId": "A"
      }],
      "title": "Active Workflows/min",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "red", "value": 0},
              {"color": "yellow", "value": 95},
              {"color": "green", "value": 99}
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 4, "y": 1},
      "id": 2,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "(1 - (sum(volcano_errors_total) or vector(0)) / (sum(volcano_llm_calls_total) or vector(1))) * 100",
        "refId": "A"
      }],
      "title": "Success Rate (5m)",
      "type": "gauge"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 1000000},
              {"color": "orange", "value": 10000000}
            ]
          },
          "unit": "short"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 8, "y": 1},
      "id": 3,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_llm_tokens_total)",
        "refId": "A"
      }],
      "title": "Total Tokens (24h)",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 5000},
              {"color": "orange", "value": 30000}
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 12, "y": 1},
      "id": 4,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "avg(volcano_step_duration_milliseconds_sum / volcano_step_duration_milliseconds_count)",
        "refId": "A"
      }],
      "title": "Avg Step Duration",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 100},
              {"color": "red", "value": 1000}
            ]
          },
          "unit": "short"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 16, "y": 1},
      "id": 5,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_errors_total)",
        "refId": "A"
      }],
      "title": "Total Errors (24h)",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "red", "value": 0},
              {"color": "yellow", "value": 1},
              {"color": "green", "value": 5}
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {"h": 4, "w": 4, "x": 20, "y": 1},
      "id": 6,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "((sum(volcano_errors_total) or vector(0)) / (sum(volcano_llm_calls_total) or vector(1))) * 100",
        "refId": "A"
      }],
      "title": "Error Rate %",
      "type": "gauge"
    },
    {
      "title": "AGENT ANALYTICS",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 5},
      "id": 200,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {"hideFrom": {"tooltip": false, "viz": false, "legend": false}},
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
      "id": 7,
      "options": {
        "legend": {"displayMode": "table", "placement": "right", "values": ["value"]},
        "pieType": "pie",
        "tooltip": {"mode": "single"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "topk(10, sum(volcano_agent_executions_total) by (agent_name))",
        "legendFormat": "{{agent_name}}",
        "refId": "A"
      }],
      "title": "Top 10 Agents by Execution Count",
      "type": "piechart"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {"hideFrom": {"tooltip": false, "viz": false, "legend": false}},
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
      "id": 8,
      "options": {
        "legend": {"displayMode": "table", "placement": "right", "values": ["value"]},
        "pieType": "pie",
        "tooltip": {"mode": "single"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "topk(10, sum(volcano_agent_tokens_total) by (agent_name))",
        "legendFormat": "{{agent_name}}",
        "refId": "A"
      }],
      "title": "Top 10 Agents by Token Consumption",
      "type": "piechart"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "auto"
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
      "id": 9,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Calls", "desc": true}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_subagent_calls_total) by (parent_agent_name, agent_name)",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "renameByName": {
              "parent_agent_name": "Parent Agent",
              "agent_name": "Child Agent",
              "Value": "Calls"
            }
          }
        }
      ],
      "title": "Parent â†’ Child Agent Relationships (1h)",
      "type": "table"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
      "id": 10,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_executions_total) by (agent_name)",
        "legendFormat": "{{agent_name}}",
        "refId": "A"
      }],
      "title": "Agent Executions Over Time",
      "type": "timeseries"
    },
    {
      "title": "TOKEN ECONOMICS",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 22},
      "id": 300,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 23},
      "id": 11,
      "options": {
        "legend": {"calcs": ["last"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_input_total) by (provider)",
          "legendFormat": "{{provider}} - input",
          "refId": "A"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_output_total) by (provider)",
          "legendFormat": "{{provider}} - output",
          "refId": "B"
        }
      ],
      "title": "Tokens/min by Provider (Input vs Output)",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "hideFrom": {"tooltip": false, "viz": false, "legend": false}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 23},
      "id": 12,
      "options": {
        "legend": {"displayMode": "table", "placement": "right", "values": ["value", "percent"]},
        "pieType": "pie",
        "tooltip": {"mode": "single"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "topk(10, sum(volcano_llm_tokens_total) by (model))",
        "legendFormat": "{{model}}",
        "refId": "A"
      }],
      "title": "Token Consumption by Model (1h)",
      "type": "piechart"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 31},
      "id": 13,
      "options": {
        "legend": {"calcs": ["last", "max"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_tokens_total) by (agent_name)",
        "legendFormat": "{{agent_name}}",
        "refId": "A"
      }],
      "title": "Tokens/min by Agent Name",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": 0},
              {"color": "yellow", "value": 60},
              {"color": "red", "value": 80}
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 31},
      "id": 14,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "(sum(volcano_llm_tokens_input_total) / sum(volcano_llm_tokens_total)) * 100",
        "refId": "A"
      }],
      "title": "Input Token % (vs Total)",
      "type": "gauge"
    },
    {
      "title": "PERFORMANCE",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 39},
      "id": 400,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "ms"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 40},
      "id": 15,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "histogram_quantile(0.99, sum(volcano_step_duration_milliseconds_bucket) by (le))",
          "legendFormat": "p99",
          "refId": "A"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "histogram_quantile(0.95, sum(volcano_step_duration_milliseconds_bucket) by (le))",
          "legendFormat": "p95",
          "refId": "B"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "histogram_quantile(0.50, sum(volcano_step_duration_milliseconds_bucket) by (le))",
          "legendFormat": "p50",
          "refId": "C"
        }
      ],
      "title": "Step Duration (p50/p95/p99)",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "reqps"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 40},
      "id": 16,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_llm_calls_total) by (provider)",
        "legendFormat": "{{provider}}",
        "refId": "A"
      }],
      "title": "LLM Calls/sec by Provider",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "auto"
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 48},
      "id": 17,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Tokens", "desc": true}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_tokens_total) by (agent_name)",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "renameByName": {
              "agent_name": "Agent",
              "Value": "Tokens (1h)"
            }
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [{"field": "Tokens (1h)", "desc": true}]
          }
        }
      ],
      "title": "Agent Token Consumption Leaderboard",
      "type": "table"
    },
    {
      "title": "MCP TOOLS",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 56},
      "id": 500,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "reqps"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 57},
      "id": 18,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_mcp_calls_total) by (server)",
        "legendFormat": "{{server}}",
        "refId": "A"
      }],
      "title": "MCP Tool Calls/sec by Server",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "custom": {
            "align": "auto",
            "displayMode": "color-background"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 100},
              {"color": "orange", "value": 500}
            ]
          },
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 57},
      "id": 19,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Calls", "desc": true}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "topk(20, sum(volcano_mcp_calls_total) by (server))",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "renameByName": {
              "server": "MCP Server",
              "Value": "Calls (1h)"
            }
          }
        }
      ],
      "title": "Top MCP Servers by Call Volume",
      "type": "table"
    },
    {
      "title": "ERRORS & RELIABILITY",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 65},
      "id": 600,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "reqps"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 66},
      "id": 20,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_errors_total) by (error_type)",
        "legendFormat": "{{error_type}}",
        "refId": "A"
      }],
      "title": "Errors/sec by Type",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "hideFrom": {"tooltip": false, "viz": false, "legend": false}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 66},
      "id": 21,
      "options": {
        "legend": {"displayMode": "table", "placement": "right", "values": ["value", "percent"]},
        "pieType": "pie",
        "tooltip": {"mode": "single"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_errors_total) by (error_type)",
        "legendFormat": "{{error_type}}",
        "refId": "A"
      }],
      "title": "Error Distribution (1h)",
      "type": "piechart"
    },
    {
      "title": "WORKFLOW INSIGHTS",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 74},
      "id": 700,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "bars",
            "fillOpacity": 80,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 75},
      "id": 22,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "single", "sort": "none"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_step_duration_milliseconds_count) by (type)",
        "legendFormat": "{{type}} steps",
        "refId": "A"
      }],
      "title": "Step Types Distribution",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 2},
              {"color": "red", "value": 4}
            ]
          },
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 75},
      "id": 23,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"values": false, "calcs": ["mean"], "fields": ""},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "count(volcano_step_duration_milliseconds_count) / count(volcano_agent_executions_total)",
        "refId": "A"
      }],
      "title": "Average Steps per Workflow",
      "type": "gauge"
    },
    {
      "title": "ðŸ“ˆ ADVANCED ANALYTICS",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 83},
      "id": 800,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "auto"
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 10, "w": 24, "x": 0, "y": 84},
      "id": 24,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Tokens/Exec", "desc": true}]
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_agent_executions_total) by (agent_name)",
          "format": "table",
          "instant": true,
          "refId": "A"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_agent_tokens_total) by (agent_name)",
          "format": "table",
          "instant": true,
          "refId": "B"
        }
      ],
      "transformations": [
        {
          "id": "joinByField",
          "options": {
            "byField": "agent_name",
            "mode": "outer"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true, "Time 1": true, "Time 2": true},
            "renameByName": {
              "agent_name": "Agent",
              "Value #A": "Executions",
              "Value #B": "Total Tokens"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Tokens/Exec",
            "binary": {
              "left": "Total Tokens",
              "operator": "/",
              "right": "Executions"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        }
      ],
      "title": "Agent Efficiency Analysis (Tokens per Execution)",
      "type": "table"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "ms"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 94},
      "id": 25,
      "options": {
        "legend": {"calcs": ["last", "max"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "histogram_quantile(0.95, sum(volcano_llm_duration_milliseconds_bucket) by (le, provider))",
          "legendFormat": "{{provider}}",
          "refId": "A"
        }
      ],
      "title": "LLM Latency (p95) by Provider",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "ms"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 94},
      "id": 26,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "none"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "histogram_quantile(0.95, sum(volcano_step_duration_milliseconds_bucket) by (le))",
          "legendFormat": "p95",
          "refId": "A"
        },
        {
          "expr": "histogram_quantile(0.50, sum(volcano_step_duration_milliseconds_bucket) by (le))",
          "legendFormat": "p50",
          "refId": "B"
        }
      ],
      "title": "Step Latency Distribution",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "color-background"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 100000},
              {"color": "red", "value": 1000000}
            ]
          },
          "unit": "short"
        }
      },
      "gridPos": {"h": 10, "w": 12, "x": 0, "y": 102},
      "id": 27,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Total Tokens", "desc": true}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "topk(20, sum(volcano_llm_tokens_total) by (model, provider))",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "indexByName": {"provider": 0, "model": 1, "Value": 2},
            "renameByName": {
              "provider": "Provider",
              "model": "Model",
              "Value": "Total Tokens (1h)"
            }
          }
        }
      ],
      "title": "Model Leaderboard (by Token Usage)",
      "type": "table"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 10, "w": 12, "x": 12, "y": 102},
      "id": 28,
      "options": {
        "legend": {"calcs": ["last", "max"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "desc"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_total) by (agent_name)",
          "legendFormat": "{{agent_name}}",
          "refId": "A"
        }
      ],
      "title": "Token Consumption Timeline by Agent (5m rate)",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "bars",
            "fillOpacity": 80,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 112},
      "id": 29,
      "options": {
        "legend": {"calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "desc"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_input_total) by (provider)",
          "legendFormat": "{{provider}} - input",
          "refId": "A"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_output_total) by (provider)",
          "legendFormat": "{{provider}} - output",
          "refId": "B"
        }
      ],
      "title": "Input vs Output Tokens by Provider (1h)",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "gradient-gauge"
          },
          "mappings": [],
          "max": 100,
          "min": 0,
          "unit": "percent"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 112},
      "id": 30,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Input %", "desc": false}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "(sum(volcano_llm_tokens_input_total) by (provider) / sum(volcano_llm_tokens_total) by (provider)) * 100",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "renameByName": {
              "provider": "Provider",
              "Value": "Input %"
            }
          }
        }
      ],
      "title": "Input Token % by Provider",
      "type": "table"
    },
    {
      "title": "ðŸŽ­ AGENT DEEP DIVE",
      "type": "row",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 120},
      "id": 900,
      "collapsed": false
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "auto",
            "displayMode": "auto"
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 10, "w": 24, "x": 0, "y": 121},
      "id": 31,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Executions", "desc": true}]
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_agent_executions_total) by (agent_name)",
          "format": "table",
          "instant": true,
          "refId": "A"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_agent_tokens_total) by (agent_name)",
          "format": "table",
          "instant": true,
          "refId": "B"
        }
      ],
      "transformations": [
        {
          "id": "joinByField",
          "options": {
            "byField": "agent_name",
            "mode": "outer"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true, "Time 1": true, "Time 2": true},
            "indexByName": {"agent_name": 0, "Value #A": 1, "Value #B": 2},
            "renameByName": {
              "agent_name": "Agent",
              "Value #A": "Executions",
              "Value #B": "Tokens"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Tokens/Exec",
            "binary": {
              "left": "Tokens",
              "operator": "/",
              "right": "Executions"
            },
            "mode": "binary"
          }
        }
      ],
      "title": "Complete Agent Performance Comparison",
      "type": "table"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 30,
            "gradientMode": "opacity",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {"group": "A", "mode": "normal"}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 131},
      "id": 32,
      "options": {
        "legend": {"calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "desc"}
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_llm_tokens_total) by (model)",
        "legendFormat": "{{model}}",
        "refId": "A"
      }],
      "title": "Token Consumption by Model Over Time",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "custom": {
            "align": "auto",
            "displayMode": "color-background"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 1000},
              {"color": "orange", "value": 5000},
              {"color": "red", "value": 10000}
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 139},
      "id": 33,
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "p95 Latency", "desc": true}]
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "histogram_quantile(0.95, sum(volcano_llm_duration_milliseconds_bucket) by (le, provider, model))",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "indexByName": {"provider": 0, "model": 1, "Value": 2},
            "renameByName": {
              "provider": "Provider",
              "model": "Model",
              "Value": "p95 Latency (ms)"
            }
          }
        }
      ],
      "title": "Provider/Model Latency Comparison",
      "type": "table"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "continuous-GrYlRd"},
          "custom": {
            "hideFrom": {"tooltip": false, "viz": false, "legend": false}
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 139},
      "id": 34,
      "options": {
        "calculate": false,
        "cellGap": 2,
        "color": {
          "exponent": 0.5,
          "fill": "dark-orange",
          "mode": "scheme",
          "scale": "exponential",
          "scheme": "Spectral",
          "steps": 64
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "showValue": "auto",
        "tooltip": {
          "show": true,
          "yHistogram": false
        },
        "yAxis": {
          "axisPlacement": "left",
          "reverse": false
        }
      },
      "targets": [{
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "expr": "sum(volcano_agent_subagent_calls_total) by (parent_agent_name, agent_name)",
        "format": "table",
        "instant": true,
        "refId": "A"
      }],
      "title": "Agent Collaboration Heatmap",
      "type": "table",
      "options": {
        "showHeader": true,
        "sortBy": [{"displayName": "Value", "desc": true}]
      },
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {"Time": true},
            "renameByName": {
              "parent_agent_name": "Parent Agent",
              "agent_name": "Child Agent",
              "Value": "Call Count"
            }
          }
        }
      ]
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "none",
            "hideFrom": {"tooltip": false, "viz": false, "legend": false},
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {"type": "linear"},
            "showPoints": "never",
            "spanNulls": false
          },
          "mappings": [],
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 147},
      "id": 35,
      "options": {
        "legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi", "sort": "desc"}
      },
      "targets": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "expr": "sum(volcano_llm_tokens_total) by (provider)",
          "legendFormat": "{{provider}}",
          "refId": "A"
        }
      ],
      "title": "Hourly Token Consumption by Provider",
      "type": "timeseries"
    }
  ],
  "refresh": "5s",
  "schemaVersion": 38,
  "tags": ["volcano", "ai", "agents", "comprehensive"],
  "templating": {"list": []},
  "time": {"from": "now-15m", "to": "now"},
  "timepicker": {},
  "timezone": "browser",
  "title": "Volcano SDK - Comprehensive Analytics",
  "uid": "volcano-sdk-main",
  "version": 0,
  "weekStart": ""
}

